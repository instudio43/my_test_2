"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.prototype.forEach||Object.defineProperty(Object.prototype,"forEach",{value:function(e,t){if(null==this)throw new TypeError("Not an object");for(var n in t=t||window,this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)}});var ContentReadMore=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.config={selector:".oreadmore",defaultBlockConfig:{containerSelector:".rm-container",collapsedHeight:250,btn:{content:{expanded:"Read Less",collapsed:"Read More"},classes:{main:"rm-btn",collapsed:"rm-btn-gradient"}},defaultState:"collapsed",skipDefault:!1}},this.config=DeepMerge.merge(this.config,e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.init.bind(this)):this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;document.querySelectorAll(this.config.selector).forEach(function(e){new ContentReadMoreBlock(e,t.config.defaultBlockConfig)})}}]),t}(),DeepMerge=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isObject",value:function(e){return e&&"object"===_typeof(e)&&!Array.isArray(e)}},{key:"merge",value:function(t,n){var i=this,o=_extends({},t);return this.isObject(t)&&this.isObject(n)&&Object.keys(n).forEach(function(e){i.isObject(n[e])&&e in t?o[e]=i.merge(t[e],n[e]):_extends(o,_defineProperty({},e,n[e]))}),o}}]),e}(),ContentReadMoreBlock=function(){function n(e,t){if(_classCallCheck(this,n),!e||!t)throw new Error("ContentReadMoreBlock must have an ele and config param when being constructed");this.ele=e,this.config=DeepMerge.merge(t,this.convertDataSetsToConfig({containerSelector:"container",collapsedHeight:"collapsedHeight",btn:{content:{expanded:"btnReadLess",collapsed:"btnReadMore"},classes:{main:"btnClass",collapsed:"btnCollapsedClass"}},defaultState:"defaultState",skipDefault:"skipDefault"})),this.contentEle=this.getContentEle(e),this.btnEle=null,this.init()}return _createClass(n,[{key:"getContentEle",value:function(e){return e.querySelector(this.config.containerSelector)}},{key:"convertDataSetsToConfig",value:function(t){var n=this,i={};return DeepMerge.isObject(t)&&Object.keys(t).forEach(function(e){DeepMerge.isObject(t[e])?i[e]=n.convertDataSetsToConfig(t[e]):void 0!==n.ele.dataset&&t[e]in n.ele.dataset&&(i[e]=n.ele.dataset[t[e]])}),i}},{key:"init",value:function(){this.contentEle.offsetHeight>this.config.collapsedHeight&&(this.setDefaultState(),this.addReadMoreBtn())}},{key:"addClickEvent",value:function(){this.btnEle.addEventListener("click",this.handleClickEvent.bind(this))}},{key:"handleClickEvent",value:function(){this.toggle(),this.btnEle.innerHTML=this.getReadMoreText()}},{key:"toggle",value:function(){this.isCollapsed()?this.expand():this.collapse()}},{key:"collapse",value:function(){this.contentEle.style.height=this.config.collapsedHeight+"px",this.btnEle&&this.btnEle.classList.add(this.config.btn.classes.collapsed)}},{key:"expand",value:function(){this.contentEle.style.height=null,this.btnEle&&this.btnEle.classList.remove(this.config.btn.classes.collapsed)}},{key:"setDefaultState",value:function(){if(!this.config.skipDefault){var e=this.isCollapsed();("collapsed"==this.config.defaultState&&!e||"expanded"==this.config.defaultState&&e)&&this.toggle()}}},{key:"addReadMoreBtn",value:function(){var e=document.createElement("span");e.classList.add(this.config.btn.classes.main),e.innerHTML=this.getReadMoreText(),this.isCollapsed()&&e.classList.add(this.config.btn.classes.collapsed),this.btnEle=this.ele.appendChild(e),this.addClickEvent()}},{key:"getReadMoreText",value:function(){return this.config.btn.content[this.state]}},{key:"isCollapsed",value:function(){return""!==this.contentEle.style.height}},{key:"state",get:function(){return this.isCollapsed()?"collapsed":"expanded"}}]),n}();